/// # Animations & Transitions
/// Combine your `$times` and `$changes` values
/// to create entire transitions and animations --
/// all stored in one place and easy to access
/// for consistent "changes" across your project.
/// @group change


// Changes Map
// -----------
/// A variable storing the map of
/// all your standardized changes (transitions and animations).
/// Any changes added to the `$changes` map will be accesible
/// to the `change()` function by default.
///
/// Define each change with a `name` and `value`,
/// or use interpolation to compose more complex changes.
///
/// ```
/// $changes: (
///   // single animation
///   'glow': glow time('slow') ease('in-out-quad') infinite alternate,
///
///   // single transitions
///   'slide': transform time('fast'),
///   'fade': opacity time('fade') ease('out-quad'),
///
///   // interolate using '#name' (quotes optional)
///   // to build on existing "changes"
///   'slide-in': #slide ease('out-back'),
///   'slide-out': '#slide' ease('in'),
///
///   // or string together multiple "changes"
///   'sidebar-in': ('#slide-in', '#fade' time('delay')),
///
///   // or create a 1-to-1 alias
///   'modal-in': #sidebar-in,
/// );
/// ```
///
/// - Name your changes anything –
///   from abstractions like `fade`,
///   to concrete patterns like `sidebar-in`.
/// - Values can be CSS-ready values,
///   references other changes in the map,
///   or format strings to interpolate.
///
/// @group change
/// @see {function} change
$changes: () !default;


// Change [function]
// -----------------
/// Access a named change in your `$changes` map.
///
/// @group change
///
/// @param {string} $name -
///   The name of a change in your configuration (e.g. `fade-in`).
/// @return {length} -
///   The change value requested
@function change(
  $name
) {
  @return _a_animate-get-change($name);
}
@include _a_register-function('change');


// Add Times
// ---------
/// Merge individual time maps into the global `$changes` variable,
/// in case you want to define functions in smaller groups
/// such as `fade-easing`, `slide-easing`, etc
/// before merging them into a single global easing-palette.
///
/// @group change
///
/// @parameter {map...} $maps -
///   Pass any number of maps to be merged.
/// @output -
///   An updated global `$changes` variable,
///   with new maps merged in.
@mixin add-change(
  $maps...
) {
  $changes: merge-change($changes, $maps...) !global;
}


// Merge Ease
// ----------
/// Merge multiple easing maps into a single map,
/// in case you want to define easing in smaller groups –
/// such as `fade-easing`, `slide-easing`, etc. –
/// before merging them into a single map.
///
/// This is like `add-ease`,
/// but returns the combined map
/// without assigning it to the `$changes` variable.
///
/// @group change
///
/// @parameter {maps...} $maps -
///   Pass any number of maps to be merged.
/// @return {map} -
///   The merged map of easings.
@function merge-change(
  $maps...
) {
  $return: ();

  @each $map in $maps {
    $return: map-merge($return, $map);
  }

  @return $return;
}
@include _a_register-function('merge-change');


// Get Change
// ----------
/// Access a named animation or transition in your `$changes` map.
///
/// @access private
///
/// @param {string | length | list} $name -
///   The name of an easing in your configuration (e.g. `elastic`).
/// @return {length} -
///   The calculated easing
@function _a_animate-get-change(
  $name
) {


  // Recursive check
  $name: map-get($changes, $name) or $name;
  $name: if(map-has-key($changes, $name), _a_animate-get-easing($name), $name);

  // Return
  @return unquote($name);
}
@include _a_register-function('_a_animate-get-change');
