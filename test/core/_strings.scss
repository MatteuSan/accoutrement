// String Utilities
// ================
@include test-module('Core String Utils') {


  // String Replace
// --------------
@include describe('String Replace [function]') {

  @include it('Replacing a sub-string with another string') {
    @include assert-equal(
      _a_str-replace('hello terrible world!', 'terrible', 'beautiful'),
      'hello beautiful world!'
    );
  }

  @include it('Replacing a full string') {
    @include assert-equal(
      _a_str-replace('hello', 'hello', 'world'),
      'world'
    );
  }

  @include it('Replacing a sub-string with nothing') {
    @include assert-equal(
      _a_str-replace('hello world', 'hello ', false),
      'world'
    );

    @include assert-equal(
      _a_str-replace('hello world', 'hello ', null),
      'world'
    );
  }

  @include it('Replacing all instances of a sub-string') {
    @include assert-equal(
      _a_str-replace('hello world', 'o', '000', true),
      'hell000 w000rld');
  }

  @include it('Replaces sub-strings in a list of strings') {
    @include assert-equal(
      _a_str-replace('hello' 'world', 'o', '000', true),
      'hell000' 'w000rld');
  }
}


// Interpolate
// -----------
@include describe('interpolate [function]') {
  @include it('Replace any number of interpolation strings with values') {
    @include assert-equal(
      _a_interpolate('hello %s%s', 'world', '!'),
      'hello world!'
    );
  }
}


// String Split [function]
// -----------------------
@include describe('String Split [function]') {
  @include it('Splits a string on a given separator') {
    @include assert-equal(
      _a_split('hello@world', '@'),
      'hello' 'world'
    );
  }

  @include it('Splits a string on a complex separator') {
    @include assert-equal(
      _a_split('hello, this, world', ', '),
      'hello' 'this' 'world'
    );
  }

  @include it('Limits the number of splits') {
    @include assert-equal(
      _a_split('he@llo@wor@ld', '@', 2),
      'he' 'llo'
    );

    @include assert-equal(
      _a_split('he@llo@wor@ld', '@', 1),
      join((), 'he')
    );
  }

  @include it('Can fall short of the limit') {
    @include assert-equal(
      _a_split('he@llo@wor@ld', '@', 10),
      'he' 'llo' 'wor' 'ld'
    );
  }

  @include it('Returns empty string as single-item list') {
    @include assert-equal(
      _a_split('', '@'),
      join((), '')
    );
  }

  @include it('Returns null-separator as single-item list') {
    @include assert-equal(
      _a_split('hello world'),
      join((), 'hello world')
    );
  }

  @include it('Returns empty final string on ending-separator') {
    @include assert-equal(
      _a_split('hello world ', ' '),
      'hello' 'world' ''
    );
  }

  @include it('Splits every letter on empty-string separator') {
    @include assert-equal(
      _a_split('hello world', ''),
      'h' 'e' 'l' 'l' 'o' ' ' 'w' 'o' 'r' 'l' 'd'
    );
  }
}


// Trim [function]
// ---------------
@include describe('Trim [function]') {
  @include it('Strips whitespace from start and end of a string') {
    @include assert-equal(
      _a_trim('  hello world     '),
      'hello world'
    );
  }
}

} // end module
